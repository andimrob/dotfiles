<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <title>andimrob/dotfiles</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
  </head>
  <body>
    <main>
      <section>
        <h1>Install dotfiles</h1>
        <div class="card">
          <pre><code><span class="prompt" aria-hidden="true">$ </span>sh -c "$(curl -fsSL https://raw.githubusercontent.com/andimrob/dotfiles/main/install.sh)"</code></pre>
          <button id="copyButton" aria-label="Copy install command to clipboard">Copy</button>
        </div>
        <p><a href="https://github.com/andimrob/dotfiles">View source on GitHub</a></p>
      </section>
    </main>
    <script>
      (function () {
        var command = 'sh -c "$(curl -fsSL https://raw.githubusercontent.com/andimrob/dotfiles/main/install.sh)"';
        var button = document.getElementById('copyButton');
        var timeout;

        function showCopied() {
          button.textContent = 'Copied!';
          button.classList.add('copied');
          clearTimeout(timeout);
          timeout = setTimeout(function () {
            button.textContent = 'Copy';
            button.classList.remove('copied');
          }, 2000);
        }

        function fallbackCopy(text) {
          var textarea = document.createElement('textarea');
          textarea.value = text;
          textarea.style.position = 'fixed';
          textarea.style.opacity = '0';
          document.body.appendChild(textarea);
          textarea.select();
          try {
            document.execCommand('copy');
            showCopied();
          } catch (err) {
            button.textContent = 'Failed';
            setTimeout(function () {
              button.textContent = 'Copy';
            }, 2000);
          }
          document.body.removeChild(textarea);
        }

        button.addEventListener('click', function () {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(command).then(showCopied).catch(function () {
              fallbackCopy(command);
            });
          } else {
            fallbackCopy(command);
          }
        });
      })();
    </script>
  </body>
</html>
